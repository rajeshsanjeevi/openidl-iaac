#!groovy
import groovy.json.JsonOutput
import groovy.json.JsonSlurper
node {
    checkout()
//    uploadCode()
    buildInfrastructure()
}
def checkout() {
    stage('Clone') {
        git credentialsId: 'github', branch: "${params.branchName}", url: 'https://github.com/rajeshsanjeevi/openidl-iaac.git'
        sh "echo '${params.GITHUB_BRANCH}'"
    }
}
def buildInfrastructure() {
    stage('Terraform init') {}
    stage('Terraform plan') {}
    stage('Terraform apply') {}
}

